document.addEventListener("DOMContentLoaded",()=>{var e=document.querySelectorAll(".add-to-cart");const r=document.querySelectorAll(".payment-method"),a=document.getElementById("cart-quantity"),t=document.getElementById("confirm-order-btn");function n({element:e,callback:t,type:a="click"}){var r;r=e,(Array.isArray(r)?r.length:null!==r)&&e.addEventListener(a,t)}function o(e,t){const a=document.querySelector(".toast");var r=document.querySelector(".toast-message");a.classList.add(t),r.textContent=e,setTimeout(()=>{a.classList.remove(t)},1300)}async function c({url:e=null,option:t={},callback:a=null,button:r=null}){try{var n=await(await fetch(e,{...t})).json();if(n.hasOwnProperty("errors"))return o(n.errors[0],"error");n.hasOwnProperty("message")&&o(n.message,"success"),a&&a(n)}catch(e){console.log(e),o("An error occur. Try again","error")}finally{null!==r&&l(r,!1)}}function l(e,t=!0){t?e.setAttribute("disabled",""):e.removeAttribute("disabled")}e.forEach(e=>{n({element:e,callback:({currentTarget:e})=>{var e=e.dataset.index,t=new FormData;t.append("product_id",e),c({url:"./cart",option:{method:"POST",body:t},callback:e=>{a.textContent=e.data}})}})}),n({element:t,callback:()=>{l(t),c({url:"./pay",option:{method:"POST",body:null},callback:e=>{var t=document.createElement("a");t.href=e.Url,t.click(),t.remove()},button:t})}}),r.forEach(a=>{n({element:a,callback:()=>{var e,t;e=r,t="active",e.forEach(e=>{e.classList.remove(t)}),a.classList.add("active")}})})});